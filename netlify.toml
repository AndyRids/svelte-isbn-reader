[build]
  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "build"

  # Default build command.
  command = "npm run build"

  # Directory with the serverless Lambda functions to deploy to AWS.
  functions = "src/functions/"

[dev]
  framework = "#custom"
  command = "npm run start" # Command to start your dev server
  targetPort = 8080 # The port for your application server, framework or site generator.
  port = 8888 # The port that the netlify dev will be accessible on
  publish = "public" # If you use a _redirect file, provide the path to your static content folder

# Define redirects from custom endpoint to a netlify function
[[redirects]]
  from = '/api/search/*'
  to = '/.netlify/functions/isbn-db/:splat'
  query = { format = ':format', query = ':query' }
  status = 200
  force = true

  [[headers]]
    for = "/*"
    [headers.values]
      X-Content-Type-Options = 'no-sniff'